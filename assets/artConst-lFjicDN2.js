import{l as u}from"./app-ROkFUEnc.js";import{A as c}from"./artplayer-CDM8ysg_.js";const y=t=>l=>{const n={"zh-cn":{playlist:"播放列表"},en:{playlist:"Playlist"}};l.i18n.update(n);const i=(e,a)=>{if(!t.playlist[a])return;const r=e.option;let p=e;t.rebuildPlayer?(e.destroy(),p=new c({...r,...t.playlist[a],autoplay:t.autoNext??r.autoplay,i18n:n,id:`${r.id}-${a===0?"":a}`})):(e.switchUrl(t.playlist[a].url,t.playlist[a].title),(t.autoNext??r.autoplay)&&e.play()),typeof t.onchanged=="function"&&t.onchanged(p)},s=t.playlist.findIndex(e=>e.url===l.option.url);t.autoNext&&s<t.playlist.length&&l.on("video:ended",()=>{i(l,s+1)});const o='<i class="art-icon"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M810.666667 384H85.333333v85.333333h725.333334V384z m0-170.666667H85.333333v85.333334h725.333334v-85.333334zM85.333333 640h554.666667v-85.333333H85.333333v85.333333z m640-85.333333v256l213.333334-128-213.333334-128z" fill="#ffffff"></path></svg></i>';return l.controls.add({name:"playlist",position:"right",html:t.showText?l.i18n.get("playlist"):o,style:{padding:"0 10px"},selector:t.playlist.map((e,a)=>({html:`${a+1}. ${e.title||`Ep.${a+1}`}`,style:{textAlign:"left"},index:a,default:s===a})),onSelect(e){return i(l,e.index),t.showText?l.i18n.get("playlist"):o}}),{name:"artplayerPlaylist"}};typeof window<"u"&&(window.artplayerPlaylist=y);const f="https://img.viptv.work/iptv/ads.png",d=async(t,l,n)=>{if(t.canPlayType("application/x-mpegURL")||t.canPlayType("application/vnd.apple.mpegURL"))t.src=l;else{const i=(await u(async()=>{const{default:s}=await import("./hls-B_HYICW5.js");return{default:s}},[])).default;if(i.isSupported()){const s=new i;s.attachMedia(t),s.on(i.Events.MEDIA_ATTACHED,()=>{s.loadSource(l)}),n.hls=i,n.on("destroy",()=>s.destroy())}}},h=t=>({poster:f,fullscreen:!0,fullscreenWeb:!0,autoplay:!0,autoOrientation:!0,lock:!0,setting:!1,moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},plugins:[y({rebuildPlayer:!1,onchanged:()=>{},autoNext:!0,playlist:t})]}),w=t=>({...h(t),type:"Hls",customType:{Hls:d}});export{w as h,h as m};

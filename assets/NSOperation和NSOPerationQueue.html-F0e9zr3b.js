import{_ as n,c as e,f as t,o as s}from"./app-dMPYXbhs.js";const i={};function o(p,a){return s(),e("div",null,a[0]||(a[0]=[t(`<blockquote><h1 id="一-nsoperatioin" tabindex="-1"><a class="header-anchor" href="#一-nsoperatioin"><span>一. NSOperatioin</span></a></h1></blockquote><h4 id="_1-目的" tabindex="-1"><a class="header-anchor" href="#_1-目的"><span>1.目的</span></a></h4><ul><li>开启线程</li><li>提供一些 GCD 不具备的功能</li><li>OC 框架,内部封装的是 GCD</li></ul><h4 id="_2-区别" tabindex="-1"><a class="header-anchor" href="#_2-区别"><span>2.区别</span></a></h4><ul><li>GCD 执行效率高于 NSOperation</li><li>NSOperation 提供了一些 GCD 中不具备的功能(暂停/恢复/取消)---管理操作-NSOperation 的高级用法</li></ul><h4 id="_3-nsoperation-本身是一个抽象类不可以直接使用-实际开发中使用其子类" tabindex="-1"><a class="header-anchor" href="#_3-nsoperation-本身是一个抽象类不可以直接使用-实际开发中使用其子类"><span>3.NSOperation 本身是一个抽象类不可以直接使用,实际开发中使用其子类</span></a></h4><ul><li><p>苹果提供了两个原生子类</p><ul><li>NSInvocationOperation<div class="language-objc line-numbers-mode" data-highlighter="prismjs" data-ext="objc" data-title="objc"><pre><code><span class="line">NSInvocationOperation <span class="token operator">*</span>op <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>NSInvocationOperation alloc<span class="token punctuation">]</span>  initWithTarget<span class="token punctuation">:</span><span class="token keyword">self</span> selector<span class="token punctuation">:</span><span class="token keyword">@selector</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> object<span class="token punctuation">:</span>nil<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>NSBlockOperation 将操作封装在 block 中<div class="language-objc line-numbers-mode" data-highlighter="prismjs" data-ext="objc" data-title="objc"><pre><code><span class="line"> NSBlockOperation <span class="token operator">*</span>op1 <span class="token operator">=</span> <span class="token punctuation">[</span>NSBlockOperation blockOperationWithBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 可以追加操作(无限)---如果在非主队列执行操作,原操作和追加的操作都会 开启多条线程去执行</span></span>
<span class="line">  <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;操作 1---------%@&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span>NSThread currentThread<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">[</span>op1 addExecutionBlock<span class="token punctuation">:</span><span class="token operator">^</span><span class="token punctuation">{</span></span>
<span class="line">   <span class="token function">NSLog</span><span class="token punctuation">(</span><span class="token string">@&quot;追加操作 2-----------%@&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span>NSThread currentThread<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>缺点:</p><ul><li>有过在主队列执行操作,有一个操作在主线程执行(随机),其他操作在子线程执行 - 如果直接调用 start 方法执行操作,无法确定每一个操作在哪条线程执行</li><li>一般不要追加操作,除非就是在非主队列执行</li></ul></li><li><p>操作依赖 (串行/线程同步技术)添加数量不要太多</p><ul><li>对于不同的操作队列中的操作依然有效</li><li>添加操作依赖要在添加操作队列之前</li><li>只能对添加在操作队列的操作添加依赖</li><li>一定不要添加循环依赖</li></ul></li></ul><hr><blockquote><h1 id="一-nsoperatioinqueue" tabindex="-1"><a class="header-anchor" href="#一-nsoperatioinqueue"><span>一. NSOperatioinQueue</span></a></h1></blockquote><h4 id="_1-主队列" tabindex="-1"><a class="header-anchor" href="#_1-主队列"><span>1.主队列</span></a></h4><ul><li>放在主队列中的操作,都在主线程执行</li></ul><pre><code>NSOPerationQueue mainQueue</code></pre><h4 id="_2-非主队列" tabindex="-1"><a class="header-anchor" href="#_2-非主队列"><span>2.非主队列</span></a></h4><ul><li>放在非主队列中的操作,都在子线程执行</li></ul><pre><code>[[NSOPerationQueue alloc] init]</code></pre><h4 id="_3-一般定义成全局属性" tabindex="-1"><a class="header-anchor" href="#_3-一般定义成全局属性"><span>3.一般定义成全局属性</span></a></h4><hr><h4 id="_4-每一个操作都有一个-start-方法-用来在当前线程执行" tabindex="-1"><a class="header-anchor" href="#_4-每一个操作都有一个-start-方法-用来在当前线程执行"><span>4.每一个操作都有一个 start 方法,用来在当前线程执行</span></a></h4><ul><li><p>本质:将操作添加到操作队列之后,内部会自动调用内部 start 方法,操作就会自动执行</p></li><li><p>主队列和非主队列决定操作在哪条线程执行(在哪条线程启动操作的 start 方法)</p></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div>`,20)]))}const r=n(i,[["render",o],["__file","NSOperation和NSOPerationQueue.html.vue"]]),c=JSON.parse('{"path":"/tutorial/iPhone/system/NSOperation%E5%92%8CNSOPerationQueue.html","title":"NSOperatioin","lang":"zh-CN","frontmatter":{"title":"NSOperatioin","date":"2016-12-26T13:39:59.000Z","category":["iOS"],"tag":["iOS"],"description":"一. NSOperatioin 1.目的 开启线程 提供一些 GCD 不具备的功能 OC 框架,内部封装的是 GCD 2.区别 GCD 执行效率高于 NSOperation NSOperation 提供了一些 GCD 中不具备的功能(暂停/恢复/取消)---管理操作-NSOperation 的高级用法 3.NSOperation 本身是一个抽象类不可以...","head":[["meta",{"property":"og:url","content":"https://www.viptv.work/tutorial/iPhone/system/NSOperation%E5%92%8CNSOPerationQueue.html"}],["meta",{"property":"og:site_name","content":"VIPTV - 工作室"}],["meta",{"property":"og:title","content":"NSOperatioin"}],["meta",{"property":"og:description","content":"一. NSOperatioin 1.目的 开启线程 提供一些 GCD 不具备的功能 OC 框架,内部封装的是 GCD 2.区别 GCD 执行效率高于 NSOperation NSOperation 提供了一些 GCD 中不具备的功能(暂停/恢复/取消)---管理操作-NSOperation 的高级用法 3.NSOperation 本身是一个抽象类不可以..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-26T00:22:11.000Z"}],["meta",{"property":"article:tag","content":"iOS"}],["meta",{"property":"article:published_time","content":"2016-12-26T13:39:59.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-26T00:22:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NSOperatioin\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2016-12-26T13:39:59.000Z\\",\\"dateModified\\":\\"2024-11-26T00:22:11.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Hefung\\",\\"url\\":\\"/about/us\\"}]}"]]},"headers":[],"git":{"createdTime":1732580531000,"updatedTime":1732580531000,"contributors":[{"name":"github-actions[bot]","email":"28900094+github-actions[bot]@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":1.77,"words":531},"filePathRelative":"tutorial/iPhone/system/NSOperation和NSOPerationQueue.md","localizedDate":"2016年12月26日","excerpt":"","autoDesc":true}');export{r as comp,c as data};

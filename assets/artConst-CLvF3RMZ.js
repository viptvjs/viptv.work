import{l as y}from"./app-DvAYyazT.js";import{A as c}from"./artplayer-UPIBNj0m.js";const u=t=>l=>{const i={"zh-cn":{playlist:"播放列表"},en:{playlist:"Playlist"}};l.i18n.update(i);const s=(e,a)=>{if(!t.playlist[a])return;const r=e.option;let p=e;t.rebuildPlayer?(e.destroy(),p=new c({...r,...t.playlist[a],autoplay:t.autoNext??r.autoplay,i18n:i,id:`${r.id}-${a===0?"":a}`})):(e.switchUrl(t.playlist[a].url,t.playlist[a].title),(t.autoNext??r.autoplay)&&e.play()),typeof t.onchanged=="function"&&t.onchanged(p)},n=t.playlist.findIndex(e=>e.url===l.option.url);t.autoNext&&n<t.playlist.length&&l.on("video:ended",()=>{s(l,n+1)});const o='<i class="art-icon"><svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M810.666667 384H85.333333v85.333333h725.333334V384z m0-170.666667H85.333333v85.333334h725.333334v-85.333334zM85.333333 640h554.666667v-85.333333H85.333333v85.333333z m640-85.333333v256l213.333334-128-213.333334-128z" fill="#ffffff"></path></svg></i>';return l.controls.add({name:"playlist",position:"right",html:t.showText?l.i18n.get("playlist"):o,style:{padding:"0 10px"},selector:t.playlist.map((e,a)=>({html:`${a+1}. ${e.title||`Ep.${a+1}`}`,style:{textAlign:"left"},index:a,default:n===a})),onSelect(e){return s(l,e.index),t.showText?l.i18n.get("playlist"):o}}),{name:"artplayerPlaylist"}};typeof window<"u"&&(window.artplayerPlaylist=u);const f="https://img.viptv.work/iptv/ads.png",d=async(t,l,i)=>{if(t.canPlayType("application/x-mpegURL")||t.canPlayType("application/vnd.apple.mpegURL"))t.src=l;else{const s=(await y(async()=>{const{default:n}=await import("./hls-CJLzZdr-.js");return{default:n}},[])).default;if(s.isSupported()){const n=new s;n.attachMedia(t),n.on(s.Events.MEDIA_ATTACHED,()=>{n.loadSource(l)}),i.hls=s,i.on("destroy",()=>n.destroy())}}},h=t=>({poster:f,fullscreen:!0,fullscreenWeb:!0,autoplay:!0,autoOrientation:!0,lock:!0,setting:!1,moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},plugins:[u({rebuildPlayer:!1,onchanged:()=>{},autoNext:!0,playlist:t})]}),v=t=>({...h(t),type:"Hls",customType:{Hls:d}});export{v as h,h as m};

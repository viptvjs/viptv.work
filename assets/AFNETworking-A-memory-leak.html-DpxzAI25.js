import{_ as s,c as a,f as e,o as t}from"./app-BqymRMOe.js";const o={};function p(i,n){return t(),a("div",null,n[0]||(n[0]=[e(`<blockquote><p>细心的你是否也发现了 AFN 的内存泄漏的问题了呢.</p></blockquote><h3 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法"><span>解决方法</span></a></h3><div class="language-objc line-numbers-mode" data-highlighter="prismjs" data-ext="objc" data-title="objc"><pre><code><span class="line">    <span class="token operator">+</span> <span class="token punctuation">(</span>AFHTTPSessionManager <span class="token operator">*</span><span class="token punctuation">)</span>sharedHTTPSession<span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">static</span> dispatch_once_t onceToken<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>onceToken<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span></span>
<span class="line">        manager <span class="token operator">=</span> <span class="token punctuation">[</span>AFHTTPSessionManager manager<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">        manager<span class="token punctuation">.</span>requestSerializer<span class="token punctuation">.</span>timeoutInterval <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">[</span>manager<span class="token punctuation">.</span>requestSerializer  setValue<span class="token punctuation">:</span><span class="token string">@&quot;XMLHttpRequest&quot;</span> forHTTPHeaderField<span class="token punctuation">:</span><span class="token string">@&quot;X-Requested-With&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> manager<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token operator">+</span> <span class="token punctuation">(</span>AFURLSessionManager <span class="token operator">*</span><span class="token punctuation">)</span>sharedURLSession<span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">static</span> dispatch_once_t onceToken2<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">dispatch_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>onceToken2<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token punctuation">{</span></span>
<span class="line">        urlsession <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>AFURLSessionManager alloc<span class="token punctuation">]</span> initWithSessionConfiguration<span class="token punctuation">:</span><span class="token punctuation">[</span>NSURLSessionConfiguration defaultSessionConfiguration<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> urlsession<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>将有问题的语句全部替换成单例后，再用 instruments 检查，再也没有出现泄漏的红叉了。O(∩_∩)O 哈哈~</p></blockquote>`,4)]))}const l=s(o,[["render",p],["__file","AFNETworking-A-memory-leak.html.vue"]]),r=JSON.parse('{"path":"/tutorial/iPhone/source/AFNETworking-A-memory-leak.html","title":"AFNetworking A memory leak","lang":"zh-CN","frontmatter":{"title":"AFNetworking A memory leak","date":"2017-01-19T00:00:00.000Z","category":["iOS"],"tag":["iOS","Bug录"],"description":"细心的你是否也发现了 AFN 的内存泄漏的问题了呢. 解决方法 将有问题的语句全部替换成单例后，再用 instruments 检查，再也没有出现泄漏的红叉了。O(∩_∩)O 哈哈~","head":[["meta",{"property":"og:url","content":"https://www.viptv.work/tutorial/iPhone/source/AFNETworking-A-memory-leak.html"}],["meta",{"property":"og:site_name","content":"VIPTV - 工作室"}],["meta",{"property":"og:title","content":"AFNetworking A memory leak"}],["meta",{"property":"og:description","content":"细心的你是否也发现了 AFN 的内存泄漏的问题了呢. 解决方法 将有问题的语句全部替换成单例后，再用 instruments 检查，再也没有出现泄漏的红叉了。O(∩_∩)O 哈哈~"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-17T16:28:16.000Z"}],["meta",{"property":"article:tag","content":"iOS"}],["meta",{"property":"article:tag","content":"Bug录"}],["meta",{"property":"article:published_time","content":"2017-01-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-17T16:28:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AFNetworking A memory leak\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2017-01-19T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-17T16:28:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Hefung\\",\\"url\\":\\"/about/us\\"}]}"]]},"headers":[{"level":3,"title":"解决方法","slug":"解决方法","link":"#解决方法","children":[]}],"git":{"createdTime":1731860896000,"updatedTime":1731860896000,"contributors":[{"name":"github-actions[bot]","email":"28900094+github-actions[bot]@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":0.39,"words":117},"filePathRelative":"tutorial/iPhone/source/AFNETworking-A-memory-leak.md","localizedDate":"2017年1月19日","excerpt":"","autoDesc":true}');export{l as comp,r as data};
